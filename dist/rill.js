!function(e){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=e();else if("function"==typeof define&&define.amd)define([],e);else{var t;t="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this,t.rill=e()}}(function(){var e;return function t(e,r,n){function s(i,a){if(!r[i]){if(!e[i]){var h="function"==typeof require&&require;if(!a&&h)return h(i,!0);if(o)return o(i,!0);var u=new Error("Cannot find module '"+i+"'");throw u.code="MODULE_NOT_FOUND",u}var c=r[i]={exports:{}};e[i][0].call(c.exports,function(t){var r=e[i][1][t];return s(r?r:t)},c,c.exports,t,e,r,n)}return r[i].exports}for(var o="function"==typeof require&&require,i=0;i<n.length;i++)s(n[i]);return s}({1:[function(e,t){"use strict";function r(e){if(!Array.isArray(e))throw new TypeError("Rill: Middleware stack must be an array.");var t=n(e,[]);return function(e,r){function n(o){if(s>=o)return Promise.reject(new Error("Rill: next() called multiple times."));var i=t[o]||r;if(s=o,!i)return Promise.resolve();try{return Promise.resolve(i(e,function(){return n(o+1)}))}catch(a){return Promise.reject(a)}}var s=-1;return n(0)}}function n(e,t){for(var r,s=e.length,o=0;s>o;o++)if(r=e[o])if("function"==typeof r)t.push(r);else if(Array.isArray(r))n(r,t);else{if(!Array.isArray(r.stack))throw new TypeError("Rill: Middleware must be an functions. Got a ["+r.constructor.name+"].");n(r.stack,t)}return t}t.exports=r},{}],2:[function(e,t,r){"use strict";var n=/ *([^=;]+) *=? *([^;]+)?/g;r.parse=function(e){if("string"!=typeof e)return{};for(var t,r,s,o={};t=n.exec(e);)r=t[1],s=t[2],o[r]=s?decodeURIComponent(s):void 0;return o},r.serialize=function(e,t,r){var n=[e+"="+encodeURIComponent(t)];return r&&(r.domain&&n.push("domain="+r.domain),r.path&&n.push("path="+r.path),r.expires&&n.push("expires="+(r.expires.toUTCString?r.expires.toUTCString():r.expires)),r.maxAge&&n.push("max-age="+(0|r.maxAge)),r.httpOnly&&n.push("httponly"),r.secure&&n.push("secure")),n.join("; ")}},{}],3:[function(e,t){"use strict";function r(e,t,s){this.code=e,this.message=t||n[e],Error.call(this),Error.captureStackTrace&&Error.captureStackTrace(this,r);for(var o in s)this[o]=s[o]}var n=e(5).STATUS_CODES;t.exports=r,r.prototype=Object.create(Error)},{5:5}],4:[function(e,t){"use strict";function r(){this.navigate(h.href,{popState:!0})}function n(e){if(!e.defaultPrevented){var t=e.target,r=!1,n=o(t,"target"),s=o(t,"action"),u=o(t,"method").toUpperCase(),c=a(t,!0);if(!n||"_self"===n){if("GET"===u){var f=i.parse(i.resolve(h.href,s));delete f.search,f.query=c.body,r=this.navigate(i.format(f))}else r=this.navigate({url:s,method:u,body:c.body,files:c.files,headers:{"content-type":o(t,"enctype")}});r&&(t.hasAttribute("data-noreset")||t.reset(),e.preventDefault())}}}function s(e){if(!(e.defaultPrevented||e.metaKey||e.ctrlKey||e.shiftKey||0!==e.button)){for(var t=e.target;null!=t&&"A"!==t.nodeName;)t=t.parentNode;if(t){var r=o(t,"href"),n=o(t,"target"),s=o(t,"rel");r&&(n&&"_self"!==n||u.test(s)||t.hasAttribute("download")||this.navigate(r)&&e.preventDefault())}}}function o(e,t){var r=e.getAttribute(t)||e[t];return"string"==typeof r?r:""}var i=e(27),a=e(18),h=window.history.location||window.location,u=/(?:^|\s+)external(?:\s+|$)/;t.exports={onPopState:r,onSubmit:n,onClick:s}},{18:18,27:27}],5:[function(e,t){"use strict";var r=e(8),n=e(6),s=e(7),o=e(25),i=["CHECKOUT","CONNECT","COPY","DELETE","GET","HEAD","LOCK","M-SEARCH","MERGE","MKACTIVITY","MKCALENDAR","MKCOL","MOVE","NOTIFY","OPTIONS","PATCH","POST","PROPFIND","PROPPATCH","PURGE","PUT","REPORT","SEARCH","SUBSCRIBE","TRACE","UNLOCK","UNSUBSCRIBE"];t.exports={STATUS_CODES:o,METHODS:i,Server:r,IncomingMessage:n,ServerResponse:s,createServer:function(){var e=arguments[arguments.length-1];return new r(e)}}},{25:25,6:6,7:7,8:8}],6:[function(e,t){"use strict";function r(e){this.url=e.url,this.method=e.method||"GET",this.headers=e.headers||{},this.headers.referer=e.referrer,this.headers.date=(new Date).toUTCString(),this.headers.host=s.host,this.headers.cookie=document.cookie,this.headers["user-agent"]=navigator.userAgent,this.headers["accept-language"]=navigator.language,this.headers.connection="keep-alive",this.headers["cache-control"]="max-age=0",this.headers.accept="*/*",this.connection={remoteAddress:"127.0.0.1",encrypted:"https:"===s.protocol},this.body=e.body,this.files=e.files}var n=e(14).EventEmitter,s=window.history.location||window.location,o=r.prototype=Object.create(n.prototype);o.httpVersionMajor=1,o.httpVersionMinor=1,o.httpVersion=o.httpVersionMajor+"."+o.httpVersionMinor,o.complete=!1,t.exports=r},{14:14}],7:[function(e,t){"use strict";function r(){this._headers={}}var n=e(14).EventEmitter,s=e(25),o=function(){},i=r.prototype=Object.create(n.prototype);i.statusCode=null,i.statusMessage=null,i.sendDate=!0,i.finished=!1,i.write=i.writeContinue=i.setTimeout=i.addTrailers=o,i.writeHead=function(e,t,r){if(!this.finished&&(this.statusCode=e,this.headersSent=!0,t&&("object"==typeof t?r=t:this.statusMessage=t),"object"==typeof r))for(var n in r)this.setHeader(n,r[n])},i.getHeader=function(e){return this._headers[e.toLowerCase()]},i.removeHeader=function(e){delete this._headers[e.toLowerCase()]},i.setHeader=function(e,t){this._headers[e.toLowerCase()]=t},i.end=function(){this.finished||(null==this.statusMessage&&(this.statusMessage=s[this.statusCode]),this.sendDate&&(this._headers.date=(new Date).toUTCString()),this._headers.status=this.statusCode,this.headersSent=!0,this.finished=!0,this.emit("finish"))},t.exports=r},{14:14,25:25}],8:[function(e,t){"use strict";function r(e){if(this._handle=this,this._pending_refresh=null,e){if("function"!=typeof e)throw new TypeError("listener must be a function");this.on("request",e)}}var n=e(27),s=e(14).EventEmitter,o=e(4),i=e(6),a=e(7),h=window.history,u=h.location||window.location,c=/#(.+)$/,f=r.prototype=Object.create(s.prototype),l=document.referrer;f.listen=function(){var e=arguments[arguments.length-1];return"function"==typeof e&&this.once("listening",e),this._onPopState=o.onPopState.bind(this),this._onSubmit=o.onSubmit.bind(this),this._onClick=o.onClick.bind(this),this.once("listening",this._onPopState),setTimeout(function(){this.listening=!0,this.emit("listening"),window.addEventListener("popstate",this._onPopState),window.addEventListener("submit",this._onSubmit),window.addEventListener("click",this._onClick)}.bind(this),0),this},f.close=function(){var e=arguments[arguments.length-1];return"function"==typeof e&&this.once("close",e),setTimeout(function(){window.removeEventListener("popstate",this._onPopState),window.removeEventListener("submit",this._onSubmit),window.removeEventListener("click",this._onClick),this.listening=!1,this.emit("close")}.bind(this),0),this},f.navigate=function(e,t){"object"!=typeof t&&(t={}),"string"==typeof e&&(e={url:e});var r=n.resolve(u.href,e.url),s=n.parse(r);if(s.host!==u.host)return!1;if(s.protocol!==u.protocol)return!1;e.url=s.path+(s.hash||""),e.referrer=l,e=new i(e);var o=new a;return o.once("finish",function(){if(e.complete=!0,e.emit("end"),clearTimeout(this._pending_refresh),o.getHeader("set-cookie")){var n=o.getHeader("set-cookie");Array.isArray(n)?n.forEach(function(e){document.cookie=e}):document.cookie=n}if(o.getHeader("refresh")){var i=o.getHeader("refresh").split(" url="),a=1e3*parseInt(i[0]),f=i[1];this._pending_refresh=setTimeout(this.navigate.bind(this,f),a)}if(o.getHeader("location"))return void setTimeout(this.navigate.bind(this,o.getHeader("location")),0);if(l=r,"GET"===e.method&&!t.popState){var p=e.url.match(c);if(null==p)window.scrollTo(0,0);else{var d=document.getElementById(p[1]);d&&d.scrollIntoView({block:"start",behavior:u.pathname===s.pathname&&(u.search||"")===(s.search||"")?"smooth":"auto"})}e.headers.referer!==e.url&&h.pushState(null,document.title,e.url)}}.bind(this)),this.emit("request",e,o),this},t.exports=r},{14:14,27:27,4:4,6:6,7:7}],9:[function(e,t){"use strict";t.exports=e(5)},{5:5}],10:[function(e,t){"use strict";t.exports=function(e){var t,r;if(!e)return 0;for(e=e.toString(),t=r=e.length;t--;){var n=e[t].charCodeAt();n>=56320&&57343>=n&&t--,n>127&&2047>=n?r++:n>2047&&65535>=n&&(r+=2)}return r}},{}],11:[function(e,t){"use strict";t.exports={Buffer:function(){}}},{}],12:[function(e,t){"use strict";t.exports={lookup:function(){}}},{}],13:[function(e,t){"use strict";function r(e){return e instanceof i}function n(e){return"function"==typeof e.pipe}function s(e){if("function"==typeof e.toJSON||e.constructor===Object||e.constructor===Array)return!0;try{return JSON.stringify(e),!0}catch(t){return!1}}var o=/^\s*</,i=e(11).Buffer,a=e(12).lookup;t.exports=function(e){if(null!=e&&"function"!=typeof e){if("object"==typeof e){if(r(e))return"application/octet-stream";if(n(e))return a(e.path)||"application/octet-stream";if(s(e))return"application/json; charset=UTF-8"}return"text/"+(o.test(String(e))?"html":"plain")+"; charset=UTF-8"}}},{11:11,12:12}],14:[function(e,t){function r(){this._events=this._events||{},this._maxListeners=this._maxListeners||void 0}function n(e){return"function"==typeof e}function s(e){return"number"==typeof e}function o(e){return"object"==typeof e&&null!==e}function i(e){return void 0===e}t.exports=r,r.EventEmitter=r,r.prototype._events=void 0,r.prototype._maxListeners=void 0,r.defaultMaxListeners=10,r.prototype.setMaxListeners=function(e){if(!s(e)||0>e||isNaN(e))throw TypeError("n must be a positive number");return this._maxListeners=e,this},r.prototype.emit=function(e){var t,r,s,a,h,u;if(this._events||(this._events={}),"error"===e&&(!this._events.error||o(this._events.error)&&!this._events.error.length)){if(t=arguments[1],t instanceof Error)throw t;var c=new Error('Uncaught, unspecified "error" event. ('+t+")");throw c.context=t,c}if(r=this._events[e],i(r))return!1;if(n(r))switch(arguments.length){case 1:r.call(this);break;case 2:r.call(this,arguments[1]);break;case 3:r.call(this,arguments[1],arguments[2]);break;default:a=Array.prototype.slice.call(arguments,1),r.apply(this,a)}else if(o(r))for(a=Array.prototype.slice.call(arguments,1),u=r.slice(),s=u.length,h=0;s>h;h++)u[h].apply(this,a);return!0},r.prototype.addListener=function(e,t){var s;if(!n(t))throw TypeError("listener must be a function");return this._events||(this._events={}),this._events.newListener&&this.emit("newListener",e,n(t.listener)?t.listener:t),this._events[e]?o(this._events[e])?this._events[e].push(t):this._events[e]=[this._events[e],t]:this._events[e]=t,o(this._events[e])&&!this._events[e].warned&&(s=i(this._maxListeners)?r.defaultMaxListeners:this._maxListeners,s&&s>0&&this._events[e].length>s&&(this._events[e].warned=!0,"function"==typeof console.trace)),this},r.prototype.on=r.prototype.addListener,r.prototype.once=function(e,t){function r(){this.removeListener(e,r),s||(s=!0,t.apply(this,arguments))}if(!n(t))throw TypeError("listener must be a function");var s=!1;return r.listener=t,this.on(e,r),this},r.prototype.removeListener=function(e,t){var r,s,i,a;if(!n(t))throw TypeError("listener must be a function");if(!this._events||!this._events[e])return this;if(r=this._events[e],i=r.length,s=-1,r===t||n(r.listener)&&r.listener===t)delete this._events[e],this._events.removeListener&&this.emit("removeListener",e,t);else if(o(r)){for(a=i;a-->0;)if(r[a]===t||r[a].listener&&r[a].listener===t){s=a;break}if(0>s)return this;1===r.length?(r.length=0,delete this._events[e]):r.splice(s,1),this._events.removeListener&&this.emit("removeListener",e,t)}return this},r.prototype.removeAllListeners=function(e){var t,r;if(!this._events)return this;if(!this._events.removeListener)return 0===arguments.length?this._events={}:this._events[e]&&delete this._events[e],this;if(0===arguments.length){for(t in this._events)"removeListener"!==t&&this.removeAllListeners(t);return this.removeAllListeners("removeListener"),this._events={},this}if(r=this._events[e],n(r))this.removeListener(e,r);else if(r)for(;r.length;)this.removeListener(e,r[r.length-1]);return delete this._events[e],this},r.prototype.listeners=function(e){var t;return t=this._events&&this._events[e]?n(this._events[e])?[this._events[e]]:this._events[e].slice():[]},r.prototype.listenerCount=function(e){if(this._events){var t=this._events[e];if(n(t))return 1;if(t)return t.length}return 0},r.listenerCount=function(e,t){return e.listenerCount(t)}},{}],15:[function(e,t){"use strict";function r(e){if("string"!=typeof e)throw new TypeError("Header Fields must be strings.");return e=e.toLowerCase(),"referrer"===e&&(e="referer"),e}t.exports=r},{}],16:[function(e,t){(function(e){"use strict";function r(){}function n(e){var t=e.toLowerCase();return function(e){var r=typeof e;switch(r){case"object":case"function":return s.call(e)===i[t];default:return r===t}}}var s=Object.prototype.toString,o=e.Buffer||r,i={string:"[object String]",number:"[object Number]","boolean":"[object Boolean]",date:"[object Date]",regexp:"[object RegExp]",error:"[object Error]","function":"[object Function]",arguments:"[object Arguments]",object:"[object Object]",array:"[object Array]"};t.exports={string:n("String"),number:n("Number"),"boolean":n("Boolean"),date:n("Date"),regexp:n("RegExp"),error:n("Error"),"function":n("Function"),arguments:n("Arguments"),object:n("Object"),array:n("Array"),stream:function(e){return null!=e&&"function"==typeof e.pipe},buffer:function(e){return e instanceof o},empty:function(e){for(var t in e)return!1;return!0}}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],17:[function(e,t){t.exports=Array.isArray||function(e){return"[object Array]"==Object.prototype.toString.call(e)}},{}],18:[function(e,t){"use strict";var r=e(21),n=r.flat,s={INPUT:!0,TEXTAREA:!0,SELECT:!0,BUTTON:!0};t.exports=function(e,t){if(!e||"FORM"!==e.nodeName)throw new Error("Can only parse form elements.");for(var o,i=t?n:r,a="multipart/form-data"===e.enctype,h=e.elements,u={},c=a?{}:void 0,f=0,l=h.length;l>f;f++)if(o=h[f],!o.disabled&&o.name&&s[o.nodeName]){var p=o.name,d=o.options;switch(o.type){case"submit":o===document.activeElement&&i(u,p,o.value);break;case"checkbox":case"radio":o.checked&&i(u,p,o.value);break;case"select-one":o.selectedIndex>=0&&i(u,p,d[o.selectedIndex].value);break;case"select-multiple":for(var m,v=[],g=0,y=d.length;y>g;g++)m=d[g],m&&m.selected&&v.push(m.value);i(u,p,v);break;case"file":var b=o.files;if(a&&b)for(var w=0,y=b.length;y>w;w++)i(c,p,b[w]);break;default:i(u,p,o.value)}}return{body:u,files:c}}},{21:21}],19:[function(e,t){function r(e){for(var t,r=[],n=0,s=0,o="";null!=(t=g.exec(e));){var i=t[0],a=t[1],u=t.index;if(o+=e.slice(s,u),s=u+i.length,a)o+=a[1];else{var c=e[s],f=t[2],l=t[3],p=t[4],d=t[5],m=t[6],v=t[7];o&&(r.push(o),o="");var y=null!=f&&null!=c&&c!==f,b="+"===m||"*"===m,w="?"===m||"*"===m,x=t[2]||"/",E=p||d||(v?".*":"[^"+x+"]+?");r.push({name:l||n++,prefix:f||"",delimiter:x,optional:w,repeat:b,partial:y,asterisk:!!v,pattern:h(E)})}}return s<e.length&&(o+=e.substr(s)),o&&r.push(o),r}function n(e){return i(r(e))}function s(e){return encodeURI(e).replace(/[\/?#]/g,function(e){return"%"+e.charCodeAt(0).toString(16).toUpperCase()})}function o(e){return encodeURI(e).replace(/[?#]/g,function(e){return"%"+e.charCodeAt(0).toString(16).toUpperCase()})}function i(e){for(var t=new Array(e.length),r=0;r<e.length;r++)"object"==typeof e[r]&&(t[r]=new RegExp("^(?:"+e[r].pattern+")$"));return function(r,n){for(var i="",a=r||{},h=n||{},u=h.pretty?s:encodeURIComponent,c=0;c<e.length;c++){var f=e[c];if("string"!=typeof f){var l,p=a[f.name];if(null==p){if(f.optional){f.partial&&(i+=f.prefix);continue}throw new TypeError('Expected "'+f.name+'" to be defined')}if(v(p)){if(!f.repeat)throw new TypeError('Expected "'+f.name+'" to not repeat, but received `'+JSON.stringify(p)+"`");if(0===p.length){if(f.optional)continue;throw new TypeError('Expected "'+f.name+'" to not be empty')}for(var d=0;d<p.length;d++){if(l=u(p[d]),!t[c].test(l))throw new TypeError('Expected all "'+f.name+'" to match "'+f.pattern+'", but received `'+JSON.stringify(l)+"`");i+=(0===d?f.prefix:f.delimiter)+l}}else{if(l=f.asterisk?o(p):u(p),!t[c].test(l))throw new TypeError('Expected "'+f.name+'" to match "'+f.pattern+'", but received "'+l+'"');i+=f.prefix+l}}else i+=f}return i}}function a(e){return e.replace(/([.+*?=^!:${}()[\]|\/\\])/g,"\\$1")}function h(e){return e.replace(/([=!:$\/()])/g,"\\$1")}function u(e,t){return e.keys=t,e}function c(e){return e.sensitive?"":"i"}function f(e,t){var r=e.source.match(/\((?!\?)/g);if(r)for(var n=0;n<r.length;n++)t.push({name:n,prefix:null,delimiter:null,optional:!1,repeat:!1,partial:!1,asterisk:!1,pattern:null});return u(e,t)}function l(e,t,r){for(var n=[],s=0;s<e.length;s++)n.push(m(e[s],t,r).source);var o=new RegExp("(?:"+n.join("|")+")",c(r));return u(o,t)}function p(e,t,n){for(var s=r(e),o=d(s,n),i=0;i<s.length;i++)"string"!=typeof s[i]&&t.push(s[i]);return u(o,t)}function d(e,t){t=t||{};for(var r=t.strict,n=t.end!==!1,s="",o=e[e.length-1],i="string"==typeof o&&/\/$/.test(o),h=0;h<e.length;h++){var u=e[h];if("string"==typeof u)s+=a(u);else{var f=a(u.prefix),l="(?:"+u.pattern+")";u.repeat&&(l+="(?:"+f+l+")*"),l=u.optional?u.partial?f+"("+l+")?":"(?:"+f+"("+l+"))?":f+"("+l+")",s+=l}}return r||(s=(i?s.slice(0,-2):s)+"(?:\\/(?=$))?"),s+=n?"$":r&&i?"":"(?=\\/|$)",new RegExp("^"+s,c(t))}function m(e,t,r){return t=t||[],v(t)?r||(r={}):(r=t,t=[]),e instanceof RegExp?f(e,t):v(e)?l(e,t,r):p(e,t,r)}var v=e(17);t.exports=m,t.exports.parse=r,t.exports.compile=n,t.exports.tokensToFunction=i,t.exports.tokensToRegExp=d;var g=new RegExp(["(\\\\.)","([\\/.])?(?:(?:\\:(\\w+)(?:\\(((?:\\\\.|[^\\\\()])+)\\))?|\\(((?:\\\\.|[^\\\\()])+)\\))([+*?])?|(\\*))"].join("|"),"g")},{17:17}],20:[function(t,r,n){(function(t){!function(s){function o(e){throw new RangeError(N[e])}function i(e,t){for(var r=e.length,n=[];r--;)n[r]=t(e[r]);return n}function a(e,t){var r=e.split("@"),n="";r.length>1&&(n=r[0]+"@",e=r[1]),e=e.replace(U,".");var s=e.split("."),o=i(s,t).join(".");return n+o}function h(e){for(var t,r,n=[],s=0,o=e.length;o>s;)t=e.charCodeAt(s++),t>=55296&&56319>=t&&o>s?(r=e.charCodeAt(s++),56320==(64512&r)?n.push(((1023&t)<<10)+(1023&r)+65536):(n.push(t),s--)):n.push(t);return n}function u(e){return i(e,function(e){var t="";return e>65535&&(e-=65536,t+=P(e>>>10&1023|55296),e=56320|1023&e),t+=P(e)}).join("")}function c(e){return 10>e-48?e-22:26>e-65?e-65:26>e-97?e-97:C}function f(e,t){return e+22+75*(26>e)-((0!=t)<<5)}function l(e,t,r){var n=0;for(e=r?I(e/j):e>>1,e+=I(e/t);e>q*A>>1;n+=C)e=I(e/q);return I(n+(q+1)*e/(e+T))}function p(e){var t,r,n,s,i,a,h,f,p,d,m=[],v=e.length,g=0,y=O,b=S;for(r=e.lastIndexOf(R),0>r&&(r=0),n=0;r>n;++n)e.charCodeAt(n)>=128&&o("not-basic"),m.push(e.charCodeAt(n));for(s=r>0?r+1:0;v>s;){for(i=g,a=1,h=C;s>=v&&o("invalid-input"),f=c(e.charCodeAt(s++)),(f>=C||f>I((E-g)/a))&&o("overflow"),g+=f*a,p=b>=h?_:h>=b+A?A:h-b,!(p>f);h+=C)d=C-p,a>I(E/d)&&o("overflow"),a*=d;t=m.length+1,b=l(g-i,t,0==i),I(g/t)>E-y&&o("overflow"),y+=I(g/t),g%=t,m.splice(g++,0,y)}return u(m)}function d(e){var t,r,n,s,i,a,u,c,p,d,m,v,g,y,b,w=[];for(e=h(e),v=e.length,t=O,r=0,i=S,a=0;v>a;++a)m=e[a],128>m&&w.push(P(m));for(n=s=w.length,s&&w.push(R);v>n;){for(u=E,a=0;v>a;++a)m=e[a],m>=t&&u>m&&(u=m);for(g=n+1,u-t>I((E-r)/g)&&o("overflow"),r+=(u-t)*g,t=u,a=0;v>a;++a)if(m=e[a],t>m&&++r>E&&o("overflow"),m==t){for(c=r,p=C;d=i>=p?_:p>=i+A?A:p-i,!(d>c);p+=C)b=c-d,y=C-d,w.push(P(f(d+b%y,0))),c=I(b/y);w.push(P(f(c,0))),i=l(r,g,n==s),r=0,++n}++r,++t}return w.join("")}function m(e){return a(e,function(e){return k.test(e)?p(e.slice(4).toLowerCase()):e})}function v(e){return a(e,function(e){return L.test(e)?"xn--"+d(e):e})}var g="object"==typeof n&&n&&!n.nodeType&&n,y="object"==typeof r&&r&&!r.nodeType&&r,b="object"==typeof t&&t;(b.global===b||b.window===b||b.self===b)&&(s=b);var w,x,E=2147483647,C=36,_=1,A=26,T=38,j=700,S=72,O=128,R="-",k=/^xn--/,L=/[^\x20-\x7E]/,U=/[\x2E\u3002\uFF0E\uFF61]/g,N={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},q=C-_,I=Math.floor,P=String.fromCharCode;if(w={version:"1.4.1",ucs2:{decode:h,encode:u},decode:p,encode:d,toASCII:v,toUnicode:m},"function"==typeof e&&"object"==typeof e.amd&&e.amd)e("punycode",function(){return w});else if(g&&y)if(r.exports==g)y.exports=w;else for(x in w)w.hasOwnProperty(x)&&(g[x]=w[x]);else s.punycode=w}(this)}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],21:[function(e,t){"use strict";function r(e,t,r){for(var n,s,o,u,c=""===t?[""]:t.match(i),f=c.length,l=e,p=0;f>p;p++)s=l,n=c[p],o=c[p+1],"[]"===n&&(n=l.length),l=(u="object"==typeof l&&n in l)?l[n]:l[n]="[]"===o||a.test(o)?[]:{};return s[n]=u?h.concat(l,r):r,e}function n(e,t,r){return t=s(e,t),e[t]=t in e?h.concat(e[t],r):r,e}function s(e,t){var r=t.split("[]");if(1===r.length)return t;for(var n=r[0],s=Object.keys(e),i=1,a=r.length;a>i;i++)n+="["+o(s,n)+"]"+r[i];return n}function o(e,t){for(var r,n=-1,s=e.length;s--;)r=e[s],0===r.indexOf(t)&&(r=r.replace(t,""),r=r.slice(1,r.indexOf("]")),r>n&&(n=Number(r)));return n+1}var i=/[^\[\]]+|\[\]/g,a=/^\d+$/,h=[];r.flat=n,t.exports=r},{}],22:[function(e,t){"use strict";function r(e,t){return Object.prototype.hasOwnProperty.call(e,t)}t.exports=function(e,t,s,o){t=t||"&",s=s||"=";var i={};if("string"!=typeof e||0===e.length)return i;var a=/\+/g;e=e.split(t);var h=1e3;o&&"number"==typeof o.maxKeys&&(h=o.maxKeys);var u=e.length;h>0&&u>h&&(u=h);for(var c=0;u>c;++c){var f,l,p,d,m=e[c].replace(a,"%20"),v=m.indexOf(s);v>=0?(f=m.substr(0,v),l=m.substr(v+1)):(f=m,l=""),p=decodeURIComponent(f),d=decodeURIComponent(l),r(i,p)?n(i[p])?i[p].push(d):i[p]=[i[p],d]:i[p]=d}return i};var n=Array.isArray||function(e){return"[object Array]"===Object.prototype.toString.call(e)}},{}],23:[function(e,t){"use strict";function r(e,t){if(e.map)return e.map(t);for(var r=[],n=0;n<e.length;n++)r.push(t(e[n],n));return r}var n=function(e){switch(typeof e){case"string":return e;case"boolean":return e?"true":"false";case"number":return isFinite(e)?e:"";default:return""}};t.exports=function(e,t,i,a){return t=t||"&",i=i||"=",null===e&&(e=void 0),"object"==typeof e?r(o(e),function(o){var a=encodeURIComponent(n(o))+i;return s(e[o])?r(e[o],function(e){return a+encodeURIComponent(n(e))}).join(t):a+encodeURIComponent(n(e[o]))}).join(t):a?encodeURIComponent(n(a))+i+encodeURIComponent(n(e)):""};var s=Array.isArray||function(e){return"[object Array]"===Object.prototype.toString.call(e)},o=Object.keys||function(e){var t=[];for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.push(r);return t}},{}],24:[function(e,t,r){"use strict";r.decode=r.parse=e(22),r.encode=r.stringify=e(23)},{22:22,23:23}],25:[function(e,t){t.exports={100:"Continue",101:"Switching Protocols",102:"Processing",200:"OK",201:"Created",202:"Accepted",203:"Non-Authoritative Information",204:"No Content",205:"Reset Content",206:"Partial Content",207:"Multi-Status",208:"Already Reported",226:"IM Used",300:"Multiple Choices",301:"Moved Permanently",302:"Found",303:"See Other",304:"Not Modified",305:"Use Proxy",306:"(Unused)",307:"Temporary Redirect",308:"Permanent Redirect",400:"Bad Request",401:"Unauthorized",402:"Payment Required",403:"Forbidden",404:"Not Found",405:"Method Not Allowed",406:"Not Acceptable",407:"Proxy Authentication Required",408:"Request Timeout",409:"Conflict",410:"Gone",411:"Length Required",412:"Precondition Failed",413:"Payload Too Large",414:"URI Too Long",415:"Unsupported Media Type",416:"Range Not Satisfiable",417:"Expectation Failed",418:"I'm a teapot",421:"Misdirected Request",422:"Unprocessable Entity",423:"Locked",424:"Failed Dependency",425:"Unordered Collection",426:"Upgrade Required",428:"Precondition Required",429:"Too Many Requests",431:"Request Header Fields Too Large",451:"Unavailable For Legal Reasons",500:"Internal Server Error",501:"Not Implemented",502:"Bad Gateway",503:"Service Unavailable",504:"Gateway Timeout",505:"HTTP Version Not Supported",506:"Variant Also Negotiates",507:"Insufficient Storage",508:"Loop Detected",509:"Bandwidth Limit Exceeded",510:"Not Extended",511:"Network Authentication Required"}},{}],26:[function(e,t){"use strict";function r(e,t){var r=[];return Object.keys(t).forEach(function(n){var s=t[n],o=Number(n);e[o]=s,e[s]=o,e[s.toLowerCase()]=o,r.push(o)}),r}function n(e){if("number"==typeof e){if(!n[e])throw new Error("invalid status code: "+e);return e}if("string"!=typeof e)throw new TypeError("code must be a number or string");var t=parseInt(e,10);if(!isNaN(t)){if(!n[t])throw new Error("invalid status code: "+t);return t}if(t=n[e.toLowerCase()],!t)throw new Error('invalid status message: "'+e+'"');return t}var s=e(25);t.exports=n,n.codes=r(n,s),n.redirect={300:!0,301:!0,302:!0,303:!0,305:!0,307:!0,308:!0},n.empty={204:!0,205:!0,304:!0},n.retry={502:!0,503:!0,504:!0}},{25:25}],27:[function(e,t,r){"use strict";function n(){this.protocol=null,this.slashes=null,this.auth=null,this.host=null,this.port=null,this.hostname=null,this.hash=null,this.search=null,this.query=null,this.pathname=null,this.path=null,this.href=null}function s(e,t,r){if(e&&u.isObject(e)&&e instanceof n)return e;var s=new n;return s.parse(e,t,r),s}function o(e){return u.isString(e)&&(e=s(e)),e instanceof n?e.format():n.prototype.format.call(e)}function i(e,t){return s(e,!1,!0).resolve(t)}function a(e,t){return e?s(e,!1,!0).resolveObject(t):t}var h=e(20),u=e(28);r.parse=s,r.resolve=i,r.resolveObject=a,r.format=o,r.Url=n;var c=/^([a-z0-9.+-]+:)/i,f=/:[0-9]*$/,l=/^(\/\/?(?!\/)[^\?\s]*)(\?[^\s]*)?$/,p=["<",">",'"',"`"," ","\r","\n","	"],d=["{","}","|","\\","^","`"].concat(p),m=["'"].concat(d),v=["%","/","?",";","#"].concat(m),g=["/","?","#"],y=255,b=/^[+a-z0-9A-Z_-]{0,63}$/,w=/^([+a-z0-9A-Z_-]{0,63})(.*)$/,x={javascript:!0,"javascript:":!0},E={javascript:!0,"javascript:":!0},C={http:!0,https:!0,ftp:!0,gopher:!0,file:!0,"http:":!0,"https:":!0,"ftp:":!0,"gopher:":!0,"file:":!0},_=e(24);n.prototype.parse=function(e,t,r){if(!u.isString(e))throw new TypeError("Parameter 'url' must be a string, not "+typeof e);var n=e.indexOf("?"),s=-1!==n&&n<e.indexOf("#")?"?":"#",o=e.split(s),i=/\\/g;o[0]=o[0].replace(i,"/"),e=o.join(s);var a=e;if(a=a.trim(),!r&&1===e.split("#").length){var f=l.exec(a);if(f)return this.path=a,this.href=a,this.pathname=f[1],f[2]?(this.search=f[2],this.query=t?_.parse(this.search.substr(1)):this.search.substr(1)):t&&(this.search="",this.query={}),this}var p=c.exec(a);if(p){p=p[0];var d=p.toLowerCase();this.protocol=d,a=a.substr(p.length)}if(r||p||a.match(/^\/\/[^@\/]+@[^@\/]+/)){var A="//"===a.substr(0,2);!A||p&&E[p]||(a=a.substr(2),this.slashes=!0)}if(!E[p]&&(A||p&&!C[p])){for(var T=-1,j=0;j<g.length;j++){var S=a.indexOf(g[j]);-1!==S&&(-1===T||T>S)&&(T=S)}var O,R;R=-1===T?a.lastIndexOf("@"):a.lastIndexOf("@",T),-1!==R&&(O=a.slice(0,R),a=a.slice(R+1),this.auth=decodeURIComponent(O)),T=-1;for(var j=0;j<v.length;j++){var S=a.indexOf(v[j]);-1!==S&&(-1===T||T>S)&&(T=S)}-1===T&&(T=a.length),this.host=a.slice(0,T),a=a.slice(T),this.parseHost(),this.hostname=this.hostname||"";var k="["===this.hostname[0]&&"]"===this.hostname[this.hostname.length-1];if(!k)for(var L=this.hostname.split(/\./),j=0,U=L.length;U>j;j++){var N=L[j];if(N&&!N.match(b)){for(var q="",I=0,P=N.length;P>I;I++)q+=N.charCodeAt(I)>127?"x":N[I];if(!q.match(b)){var M=L.slice(0,j),H=L.slice(j+1),F=N.match(w);F&&(M.push(F[1]),H.unshift(F[2])),H.length&&(a="/"+H.join(".")+a),this.hostname=M.join(".");break}}}this.hostname=this.hostname.length>y?"":this.hostname.toLowerCase(),k||(this.hostname=h.toASCII(this.hostname));var D=this.port?":"+this.port:"",$=this.hostname||"";this.host=$+D,this.href+=this.host,k&&(this.hostname=this.hostname.substr(1,this.hostname.length-2),"/"!==a[0]&&(a="/"+a))}if(!x[d])for(var j=0,U=m.length;U>j;j++){var B=m[j];if(-1!==a.indexOf(B)){var K=encodeURIComponent(B);K===B&&(K=escape(B)),a=a.split(B).join(K)}}var G=a.indexOf("#");-1!==G&&(this.hash=a.substr(G),a=a.slice(0,G));var V=a.indexOf("?");if(-1!==V?(this.search=a.substr(V),this.query=a.substr(V+1),t&&(this.query=_.parse(this.query)),a=a.slice(0,V)):t&&(this.search="",this.query={}),a&&(this.pathname=a),C[d]&&this.hostname&&!this.pathname&&(this.pathname="/"),this.pathname||this.search){var D=this.pathname||"",z=this.search||"";this.path=D+z}return this.href=this.format(),this},n.prototype.format=function(){var e=this.auth||"";e&&(e=encodeURIComponent(e),e=e.replace(/%3A/i,":"),e+="@");var t=this.protocol||"",r=this.pathname||"",n=this.hash||"",s=!1,o="";this.host?s=e+this.host:this.hostname&&(s=e+(-1===this.hostname.indexOf(":")?this.hostname:"["+this.hostname+"]"),this.port&&(s+=":"+this.port)),this.query&&u.isObject(this.query)&&Object.keys(this.query).length&&(o=_.stringify(this.query));var i=this.search||o&&"?"+o||"";return t&&":"!==t.substr(-1)&&(t+=":"),this.slashes||(!t||C[t])&&s!==!1?(s="//"+(s||""),r&&"/"!==r.charAt(0)&&(r="/"+r)):s||(s=""),n&&"#"!==n.charAt(0)&&(n="#"+n),i&&"?"!==i.charAt(0)&&(i="?"+i),r=r.replace(/[?#]/g,function(e){return encodeURIComponent(e)}),i=i.replace("#","%23"),t+s+r+i+n},n.prototype.resolve=function(e){return this.resolveObject(s(e,!1,!0)).format()},n.prototype.resolveObject=function(e){if(u.isString(e)){var t=new n;t.parse(e,!1,!0),e=t}for(var r=new n,s=Object.keys(this),o=0;o<s.length;o++){var i=s[o];r[i]=this[i]}if(r.hash=e.hash,""===e.href)return r.href=r.format(),r;if(e.slashes&&!e.protocol){for(var a=Object.keys(e),h=0;h<a.length;h++){var c=a[h];"protocol"!==c&&(r[c]=e[c])}return C[r.protocol]&&r.hostname&&!r.pathname&&(r.path=r.pathname="/"),r.href=r.format(),r}if(e.protocol&&e.protocol!==r.protocol){if(!C[e.protocol]){for(var f=Object.keys(e),l=0;l<f.length;l++){var p=f[l];r[p]=e[p]}return r.href=r.format(),r}if(r.protocol=e.protocol,e.host||E[e.protocol])r.pathname=e.pathname;else{for(var d=(e.pathname||"").split("/");d.length&&!(e.host=d.shift()););e.host||(e.host=""),e.hostname||(e.hostname=""),""!==d[0]&&d.unshift(""),d.length<2&&d.unshift(""),r.pathname=d.join("/")}if(r.search=e.search,r.query=e.query,r.host=e.host||"",r.auth=e.auth,r.hostname=e.hostname||e.host,r.port=e.port,r.pathname||r.search){var m=r.pathname||"",v=r.search||"";r.path=m+v}return r.slashes=r.slashes||e.slashes,r.href=r.format(),r}var g=r.pathname&&"/"===r.pathname.charAt(0),y=e.host||e.pathname&&"/"===e.pathname.charAt(0),b=y||g||r.host&&e.pathname,w=b,x=r.pathname&&r.pathname.split("/")||[],d=e.pathname&&e.pathname.split("/")||[],_=r.protocol&&!C[r.protocol];if(_&&(r.hostname="",r.port=null,r.host&&(""===x[0]?x[0]=r.host:x.unshift(r.host)),r.host="",e.protocol&&(e.hostname=null,e.port=null,e.host&&(""===d[0]?d[0]=e.host:d.unshift(e.host)),e.host=null),b=b&&(""===d[0]||""===x[0])),y)r.host=e.host||""===e.host?e.host:r.host,r.hostname=e.hostname||""===e.hostname?e.hostname:r.hostname,r.search=e.search,r.query=e.query,x=d;else if(d.length)x||(x=[]),x.pop(),x=x.concat(d),r.search=e.search,r.query=e.query;else if(!u.isNullOrUndefined(e.search)){if(_){r.hostname=r.host=x.shift();var A=r.host&&r.host.indexOf("@")>0?r.host.split("@"):!1;A&&(r.auth=A.shift(),r.host=r.hostname=A.shift())}return r.search=e.search,r.query=e.query,u.isNull(r.pathname)&&u.isNull(r.search)||(r.path=(r.pathname?r.pathname:"")+(r.search?r.search:"")),r.href=r.format(),r}if(!x.length)return r.pathname=null,r.path=r.search?"/"+r.search:null,r.href=r.format(),r;for(var T=x.slice(-1)[0],j=(r.host||e.host||x.length>1)&&("."===T||".."===T)||""===T,S=0,O=x.length;O>=0;O--)T=x[O],"."===T?x.splice(O,1):".."===T?(x.splice(O,1),S++):S&&(x.splice(O,1),S--);if(!b&&!w)for(;S--;S)x.unshift("..");!b||""===x[0]||x[0]&&"/"===x[0].charAt(0)||x.unshift(""),j&&"/"!==x.join("/").substr(-1)&&x.push("");var R=""===x[0]||x[0]&&"/"===x[0].charAt(0);if(_){r.hostname=r.host=R?"":x.length?x.shift():"";var A=r.host&&r.host.indexOf("@")>0?r.host.split("@"):!1;A&&(r.auth=A.shift(),r.host=r.hostname=A.shift())}return b=b||r.host&&x.length,b&&!R&&x.unshift(""),
x.length?r.pathname=x.join("/"):(r.pathname=null,r.path=null),u.isNull(r.pathname)&&u.isNull(r.search)||(r.path=(r.pathname?r.pathname:"")+(r.search?r.search:"")),r.auth=e.auth||r.auth,r.slashes=r.slashes||e.slashes,r.href=r.format(),r},n.prototype.parseHost=function(){var e=this.host,t=f.exec(e);t&&(t=t[0],":"!==t&&(this.port=t.substr(1)),e=e.substr(0,e.length-t.length)),e&&(this.hostname=e)}},{20:20,24:24,28:28}],28:[function(e,t){"use strict";t.exports={isString:function(e){return"string"==typeof e},isObject:function(e){return"object"==typeof e&&null!==e},isNull:function(e){return null===e},isNullOrUndefined:function(e){return null==e}}},{}],29:[function(e,t){"use strict";function r(e,t){this.req=new s(this,e),this.res=new o(this,t),this.fail=this.fail.bind(this),this.assert=this.assert.bind(this),this.locals={}}var n=e(3),s=e(31),o=e(33);t.exports=r;var i=r.prototype;i.fail=function(e,t,r){if("number"!=typeof e)throw new TypeError("Rill#ctx.fail: Status code must be a number.");var s=new n(e,t,r);throw this.res.status=s.code,this.res.message=s.message,s},i.assert=function(e,t,r,n){if("number"!=typeof t)throw new TypeError("Rill#ctx.assert: Status code must be a number.");e||this.fail(t,r,n)}},{3:3,31:31,33:33}],30:[function(e,t){"use strict";function r(){return this instanceof r?void(this.stack=[]):new r}var n=e(19),s=e(5),o=e(9),i=e(1),a=e(3),h=e(29),u=e(32),c=Array.prototype.slice,f=r.prototype;t.exports=r["default"]=r,f.listen=function(e,t){"function"==typeof e&&(t=e,e=null),e=e||{},e.port=null!=e.port?e.port:null;var r=e.tls?o.createServer(e.tls,this.handler()):s.createServer(this.handler());return r.listen(e.port,e.ip,e.backlog,t)},f.handler=function(){var e=i(this.stack);return function(t,r){function n(e){404===Number(o.res.status)&&(o.res.status=500),e instanceof a||console&&console.error&&void 0}function s(){u(o)}r.statusCode=404;var o=new h(t,r);e(o)["catch"](n).then(s)}},f.use=function(){for(var e=this.stack.length,t=this.stack.length+=arguments.length,r=t;e<r--;)this.stack[r]=arguments[r-e];return this},f.setup=function(){for(var e,t=arguments.length,r=0;t>r;r++)if(e=arguments[r]){if("function"!=typeof e)throw new TypeError("Rill#setup: Setup must be a function or falsey.");e(this)}return this},f.at=function(e){if("string"!=typeof e)throw new TypeError("Rill#at: Path name must be a string.");var t=[],r=n(e,t,{end:!1}),s=i(c.call(arguments,1));return this.use(function(e,n){null==e._pathname&&(e._pathname=e.req.pathname);var o=e._pathname,i=o.match(r);if(!i||i[0]!==o)return n();for(var a,h,u=t.length;u--;)a=t[u],h=i[u+1],a.repeat&&(h=null==h?[]:h.split("/")),e.req.params[a.name]=h;var c=i[i.length-1];return c!==o&&(e._pathname="/"+c),s(e,function(){return e._pathname=o,n()})})},f.host=function(e){if("string"!=typeof e)throw new TypeError("Rill#host: Host name must be a string.");var t=[],r=n(e,t,{strict:!0}),s=i(c.call(arguments,1));return this.use(function(e,n){null==e._hostname&&(e._hostname=e.req.hostname);var o=e._hostname,i=o.match(r);if(!i||i[0]!==o)return n();for(var a,h,u=t.length;u--;)a=t[u],h=i[u+1],a.repeat&&(h=null==h?[]:h.split(".")),e.req.subdomains[a.name]=h;return e._hostname=i[i.length-1],s(e,function(){return e._hostname=o,n()})})},s.METHODS.forEach(function(e){var t=e.toLowerCase();f[t]=function(t){function r(t,r){return t.req.method!==e?r():s(t,r)}var n="string"==typeof t?1:0,s=i(c.call(arguments,n));return 1===n?this.at(t,r):this.use(r)}})},{1:1,19:19,29:29,3:3,32:32,5:5,9:9}],31:[function(e,t){"use strict";function r(e,t){var r=t.headers.host,o=t.connection.encrypted?"https":"http",a=n.parse(o+"://"+r+t.url,!0);this.ctx=e,this.original=t,this.method=t.method,this.headers=t.headers,this.cookies=i.parse(this.headers.cookie),this.params={},this.href=a.href,this.protocol=o,this.port=a.port,this.host=a.host,this.hostname=a.hostname,this.path=a.path,this.pathname=a.pathname,this.search=a.search,this.hash=a.hash,this.query={},this.origin=this.protocol+"://"+this.host,this.secure="https"===this.protocol,this.subdomains=String(this.hostname).split(".").reverse().slice(2),this.ip=t.connection.remoteAddress||t.socket.remoteAddress||t.connection.socket&&t.connection.socket.remoteAddress;var h=a.query;for(var u in h)s(this.query,u,h[u])}var n=e(27),s=e(21),o=e(15),i=e(2);t.exports=r;var a=r.prototype;a.get=function(e){return this.headers[o(e)]}},{15:15,2:2,21:21,27:27}],32:[function(e,t){"use strict";function r(e){var t=e.req,r=e.res,h=r.body,u=r.original,c=a.stream(h),f=a.buffer(h);r.respond!==!1&&(u.headersSent||(404===Number(r.status)&&(r.get("Location")?r.status=302:h&&(r.status=200)),r.message=r.message||i[r.status],"HEAD"===t.method||i.empty[r.status]||!h?(h=null,r.remove("Content-Type"),r.remove("Content-Length")):(r.get("Content-Type")||r.set("Content-Type",o(h)),"object"!=typeof h||c||f||(h=JSON.stringify(h)),r.get("Content-Length")||c||r.set("Content-Length",s(h))),u.writeHead(r.status,r.message,n(r.headers)),r.end!==!1&&(c?h.pipe(u):u.end(h))))}function n(e){for(var t in e)(null==e[t]||0===e[t].length)&&delete e[t];return e}var s=e(10),o=e(13),i=e(26),a=e(16);t.exports=r},{10:10,13:13,16:16,26:26}],33:[function(e,t){"use strict";function r(e,t){this.ctx=e,this.original=t,this.status=t.statusCode,this.body=void 0,this.headers={},t.once("finish",function(){e.res.finished=!0})}var n=e(27),s=e(26),o=e(15),i=e(2);t.exports=r;var a=r.prototype;a.cookie=function(e,t,r){this.append("Set-Cookie",i.serialize(e,t,r))},a.clearCookie=function(e,t){t=t||{},t.expires=new Date,this.append("Set-Cookie",i.serialize(e,"",t))},a.redirect=function(e,t){var r=this.ctx.req;if(e="back"===e?r.get("Referrer"):e,e=e||t,!e)throw new TypeError("Rill#ctx.res.redirect: Cannot redirect, url not specified and alternative not provided.");s.redirect[this.status]||(this.status=302),this.set("Location",n.resolve(r.href,e))},a.refresh=function(e,t,r){var s=this.ctx.req;e=e||0,t="back"===t?s.get("Referrer"):t,t=t||r||s.href,this.set("Refresh",e+"; url="+n.resolve(s.href,t))},a.get=function(e){return this.headers[o(e)]},a.set=function(e,t){this.headers[o(e)]=t},a.append=function(e,t){e=o(e);var r=this.headers,n=this.headers[e];null==n?n=[]:Array.isArray(n)||(n=[n]),r[e]=n.concat(t)},a.remove=function(e){delete this.headers[o(e)]}},{15:15,2:2,26:26,27:27}]},{},[30])(30)});